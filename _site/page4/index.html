<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <link href="http://gmpg.org/xfn/11" rel="profile">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Curtis Larson's Blog &middot; A lot of software talk.
    
  </title>

  
  

  <!-- CSS -->
  <link rel="stylesheet" href="/blog/public/css/poole.css">
  <link rel="stylesheet" href="/blog/public/css/syntax.css">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/blog/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/favicon.ico?v=2">

  <!-- RSS -->
  <link rel="alternate" type="application/atom+xml" title="Curtis Larson's Blog" href="/blog/atom.xml">

<!-- Mailchimp -->
  <link href="//cdn-images.mailchimp.com/embedcode/slim-081711.css" rel="stylesheet" type="text/css">
  <style type="text/css">
    #mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; }
    /* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
       We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
  </style>

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61702644-1', 'auto');
  ga('send', 'pageview');

</script>
  <script type="text/javascript" src="//s3.amazonaws.com/downloads.mailchimp.com/js/signup-forms/popup/embed.js" data-dojo-config="usePlainJson: true, isDebug: false"></script><script type="text/javascript">require(["mojo/signup-forms/Loader"], function(L) { L.start({"baseUrl":"mc.us11.list-manage.com","uuid":"1c8750215658512459a679f1e","lid":"29a072ab9b"}) })</script>
</head>


  <body>

    <div class="container content">
      <header class="masthead">
        <h3 class="masthead-title">
          <a href="/blog/" title="Blog">Curtis Larson's Blog</a>
           &nbsp;&nbsp;&nbsp;<small><a href="/">Main Site</a></small>
           &nbsp;&nbsp;&nbsp;<small><a href="/#portfolio">Portfolio</a></small>
          
           &nbsp;&nbsp;&nbsp;
           <small><a href="/blog/archive">Archive</a></small>
          
           &nbsp;&nbsp;&nbsp;
           <small><a href="/blog/atom.xml">Feed</a></small>
          
        </h3>
      </header>

      <main>
        <div class="posts">
  
  <article class="post">
    <h1 class="post-title">
      <a href="/blog/2016/05/31/meteor-connect-to-redis/">
        Meteor 1.3+ - Connect to Redis on the Server
      </a>
    </h1>

    <time datetime="2016-05-31T00:00:00+09:00" class="post-date">31 May 2016</time>

    <h2 id="introduction">Introduction</h2>

<p>While doing research on backend connectors for the new <a href="http://www.apollostack.com">Apollo Stack</a> by the Meteor team I wanted to easily connect to a redis server from my own Meteor server. The following is a writeup of the steps to set this up. As always the full source code for this tutorial is available on <a href="https://github.com/quackware/meteor-redis-tutorial">my GitHub</a>.</p>

<h2 id="install-redis">Install Redis</h2>

<p>We can download redis onto your computer from their <a href="http://redis.io/download">download page</a>. Mac users that have homebrew can also easily install it via <code>brew install redis</code>. The rest of this tutorial will assume you are running redis on a Mac.</p>

<p>Once redis is installed you can start it by just typing <code>redis-server</code> which should give you the following prompt:</p>

<p><img src="http://i.imgur.com/KvxiYaw.png" alt="Redis Prompt" /></p>

<p>Notice that it is using the default port of <code>6379</code>. If you want to change this port from the default you will also need to change the way your redis package connects to the server. You can also play around with the server by typing <code>redis-cli</code> and manually enter in commands in the cli.</p>

<h2 id="install-packages">Install Packages</h2>

<p>We also need to install the following packages to get redis setup. The most notable is <a href="https://github.com/NodeRedis/node_redis">node_redis</a> which allows us to communicate with the redis server we installed in the previous step.</p>

<pre><code>meteor npm install --save redis
meteor npm install --save hiredis
</code></pre>

<h2 id="server-side-redis">Server Side Redis</h2>

<p>Setting up redis on the server is fairly simple, as you just need the following code:</p>

<script src="https://gist.github.com/quackware/2b06110fa475ac6080a3f5f1c69e7789.js"></script>

<p>We require the redis package, create a client from it, and wrap the <code>get</code> and <code>set</code> functions so that they can easily be used with <code>Meteor.methods</code>. We then export the client so it can be used in any other modules by just calling <code>require("redis.js")</code>. If you want to change the default port you can pass in additional options to <code>createClient</code>. A full overview of the api is available on the <a href="https://github.com/NodeRedis/node_redis">node_redis GitHub page</a>.</p>

<h2 id="meteor-methods">Meteor Methods</h2>

<p>The meteor methods are very basic for testing purposes. We just have a simple <code>setRedis</code> and <code>getRedis</code> method that use our wrapped redis functions. This allows us to test the redis functionality from the client.</p>

<script src="https://gist.github.com/quackware/42058d667822fcd7cf4e5c39ddafcf45.js"></script>

<h2 id="client-side-code">Client Side Code</h2>

<p>The client side code is composed of a few input fields and buttons that are hooked up to <code>Meteor.call</code> code. This allows us to test our simple <code>get</code> and <code>set</code> functions.</p>

<script src="https://gist.github.com/quackware/2b9919c242942ee71af74e6f312e8a41.js"></script>

<script src="https://gist.github.com/quackware/4b3ba350013f346fddd38460a3db8f5f.js"></script>

<p>Clicking <code>set</code> will add the key/value pair to the redis server. You can then retrieve the value by clicking <code>get</code> which will populate the <code>Get Value</code> label.</p>

<h2 id="conclusion">Conclusion</h2>

<p>That’s it for this short tutorial with the bulk of the content being installing and setting up redis on the server. As you can see it’s very straightforward to add data stores other than MongoDB to your Meteor application, all thanks to the new npm support provided in Meteor 1.3+. As always the full source code for this tutorial is available on <a href="https://github.com/quackware/meteor-redis-tutorial">my GitHub</a>.</p>


    
    <hr/>
    
    <span>
      <a href="http://www.curtismlarson.com" target="_blank">Curtis Larson</a> is a LA based freelance software developer. <a href="https://twitter.com/quackware" target="_blank">Follow him on Twitter</a> or <a href="mailto:curtis@curtismlarson.com" target="_blank">send him an email</a> if your looking for a talented developer.
    </span>
    
    <div id="mc_embed_signup">
<form action="//curtismlarson.us11.list-manage.com/subscribe/post?u=1c8750215658512459a679f1e&amp;id=29a072ab9b" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
  <label for="mce-EMAIL">Subscribe to our mailing list</label>
  <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;"><input type="text" name="b_1c8750215658512459a679f1e_29a072ab9b" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
    </div>
</form>
</div>
  </article>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/blog/page5">Older</a>
  
  
    
      <a class="pagination-item newer" href="/blog/page3">Newer</a>
    
  
</div>

      </main>
      <footer class="footer">
        <small>
          &copy; <time datetime="2019-02-14T11:28:22+09:00">2019</time> Curtis Larson. All rights reserved.
        </small>
      </footer>
    </div>

  </body>
</html>
