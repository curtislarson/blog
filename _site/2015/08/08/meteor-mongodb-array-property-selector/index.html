<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <link href="http://gmpg.org/xfn/11" rel="profile">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Meteor - MongoDB Object Array Property Selector &middot; Curtis Larson's Blog
    
  </title>

  <meta name="description" content="How to select a document from a collection based on a property in an array of objects.">
  <meta name="keywords" content="mongodb, meteor, meteor mongodb, mongo, meteor mongodb property, array property selector, array, property, mongodb collection, collection, meteor collection">

  <!-- CSS -->
  <link rel="stylesheet" href="/blog/public/css/poole.css">
  <link rel="stylesheet" href="/blog/public/css/syntax.css">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/blog/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/favicon.ico?v=2">

  <!-- RSS -->
  <link rel="alternate" type="application/atom+xml" title="Curtis Larson's Blog" href="/blog/atom.xml">

<!-- Mailchimp -->
  <link href="//cdn-images.mailchimp.com/embedcode/slim-081711.css" rel="stylesheet" type="text/css">
  <style type="text/css">
    #mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; }
    /* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
       We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
  </style>

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61702644-1', 'auto');
  ga('send', 'pageview');

</script>
  <script type="text/javascript" src="//s3.amazonaws.com/downloads.mailchimp.com/js/signup-forms/popup/embed.js" data-dojo-config="usePlainJson: true, isDebug: false"></script><script type="text/javascript">require(["mojo/signup-forms/Loader"], function(L) { L.start({"baseUrl":"mc.us11.list-manage.com","uuid":"1c8750215658512459a679f1e","lid":"29a072ab9b"}) })</script>
</head>


  <body>

    <div class="container content">
      <header class="masthead">
        <h3 class="masthead-title">
          <a href="/blog/" title="Blog">Curtis Larson's Blog</a>
           &nbsp;&nbsp;&nbsp;<small><a href="/">Main Site</a></small>
           &nbsp;&nbsp;&nbsp;<small><a href="/#portfolio">Portfolio</a></small>
          
           &nbsp;&nbsp;&nbsp;
           <small><a href="/blog/archive">Archive</a></small>
          
           &nbsp;&nbsp;&nbsp;
           <small><a href="/blog/atom.xml">Feed</a></small>
          
        </h3>
      </header>

      <main>
        

<article class="post">
  <h1 class="post-title">Meteor - MongoDB Object Array Property Selector</h1>
  <time datetime="2015-08-08T00:00:00-07:00" class="page-date">08 Aug 2015</time>
  <h2 id="introduction">Introduction</h2>

<p>One slightly confusing question that I get asked sometimes and I see around the internet is how to select a document from a collection based on a property in an array of objects.</p>

<p>Suppose we have a <code>SimpleSchema</code> like so:</p>

<pre><code>Schema = {};

Schema.Task = new SimpleSchema({
  name: {
    type: String,
    label: "Task Name"
  },
  tags: {
    type: [Object],
    label: "Tags",
  },
  "tags.$.name": {
    type: String
  },
  "tags.$.rank": {
    type: Number
  }
});

Tasks.attachSchema(Schema.Task);
</code></pre>

<p>And we have inserted the following document:</p>

<pre><code>Tasks.insert({
  name: "Write Meteor Tutorial",
  tags: [
    {
      "name": "Meteor",
      "rank": 0
    },
    {
      "name": "Tutorial",
      "rank": 1
    }
  ]
});
</code></pre>

<p>And we want to select all the tasks that have a tag with the name “Meteor”. We can use the following syntax to perform this task:</p>

<pre><code>Tasks.find({
  "tags.name": "Meteor"
});
</code></pre>

<p>Notice how we did not include the <code>$</code> symbol that we used when specifying our <code>SimpleSchema</code>. Additionally if we only want to select the tags and not the entire <code>Tasks</code> object we can use a <code>fields</code> option.</p>

<pre><code>Tasks.find({
  "tags.name": "Meteor"
}, {
  fields: { "tags.$": 1}
});
</code></pre>

<p>The differing syntax may seem a bit confusing, but once you get the hang of it you can create some pretty powerful and complex schemas and selectors. Hope this helps anyone running into this problem!</p>

  <hr/>
  
    <span>
      <a href="http://www.curtismlarson.com" target="_blank">Curtis Larson</a> is a LA based freelance software developer. <a href="https://twitter.com/quackware" target="_blank">Follow him on Twitter</a> or <a href="mailto:curtis@curtismlarson.com" target="_blank">send him an email</a> if you're looking for a talented developer.
    </span>
  
  <br/>
  <div id="mc_embed_signup">
<form action="//curtismlarson.us11.list-manage.com/subscribe/post?u=1c8750215658512459a679f1e&amp;id=29a072ab9b" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
  <label for="mce-EMAIL">Subscribe to our mailing list</label>
  <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;"><input type="text" name="b_1c8750215658512459a679f1e_29a072ab9b" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
    </div>
</form>
</div>
</article>

<!-- Add Disqus comments. -->
<div id="disqus_thread"></div>
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'curtismlarson';
  var disqus_identifier = "3699097/2015/08/08/meteor-mongodb-array-property-selector/";

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

<aside class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/blog/2018/10/03/edit-xml-node-js/">
            How to Read, Write, and Update XML with Node.js
            <small><time datetime="2018-10-03T00:00:00-07:00">03 Oct 2018</time></small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/blog/2018/10/01/remote-software-developer-freelance-site-list/">
            Remote Software Developer Freelance Sites
            <small><time datetime="2018-10-01T00:00:00-07:00">01 Oct 2018</time></small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/blog/2016/07/06/webpack-heroku-build-fails-no-error/">
            Webpack & Heroku - Build failure with no error message
            <small><time datetime="2016-07-06T00:00:00-07:00">06 Jul 2016</time></small>
          </a>
        </h3>
      </li>
    
  </ul>
</aside>

      </main>
      <footer class="footer">
        <small>
          &copy; <time datetime="2018-10-03T08:50:26-07:00">2018</time> Curtis Larson. All rights reserved.
        </small>
      </footer>
    </div>

  </body>
</html>
